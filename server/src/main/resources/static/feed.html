<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Management|TvM Evento</title>
    <script src="https://kit.fontawesome.com/84f63f6754.js" crossorigin="anonymous"></script>
    <script src="/js/feedback.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/css/styles.css">
</head>
    <body>
        <img src="/photos/slide6quality.jpg" alt="image" class="bgimage">
        <div class="bgblur"></div>
        <section class="Dashboard">
            <a href="index.htm"><i class="fa-solid fa-arrow-right-from-bracket fa-flip-horizontal" id="go" style="color: #d5c9c9;"></i></a>
            <img src="/photos/logo black.png" class="elogo">
            <div class="containdash">
                <aside>
                    <ul>
                        <li><a href="addevent.html">
                            <i class="fa-solid fa-plus"></i>
                            <h5>ADD EVENT</h5>
                            </a>
                        </li>
                        <li><a href="dash.html">
                            <i class="fa-solid fa-file-pen"></i>
                            <h5>MANAGE EVENT</h5>
                            </a>
                        </li>
                        <li><a href="/users.html">
                            <i class="fa-solid fa-user-pen"></i>
                            <h5>VIEW USER</h5>
                            </a>
                        </li>
                        <li><a href="addcat.html">
                            <i class="fa-solid fa-layer-group"></i>
                            <h5>ADD CATEGORY</h5>
                            </a>
                        </li>
                        <li><a href="" class="active">
                            <i class="fa-regular fa-comments"></i>
                            <h5>VIEW FEEDBACK</h5>
                            </a>
                        </li>
                    </ul>
                </aside>
                <main>
                    <h2>VIEW FEEDBACK</h2>
                    <div id="table-container">
                        <table>
                        <thead>
                            <tr>
                                <th>Username</th>
                                <th>Email</th>
                                <th>Rating</th>
                                <th>Description</th>
                                <th>Event Name</th>
                                <th>Delete</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Abhiraj</td>
                                <td>abhi456@gmail.com</td>
                                <td><i class="fa-regular fa-star" style="color: #f40101;"></i><i class="fa-regular fa-star" style="color: #f40101;"></i><i class="fa-regular fa-star" style="color: #f40101;"></i></td>
                                <td>Description</td>
                                <td>Event name</td>
                                <td><a href=""class="dbtn sm danger">Delete</a></td>
                            </tr>
                            <tr>
                                <td>Ramcharan</td>
                                <td>ram456@gmail.com</td>
                                <td><i class="fa-regular fa-star" style="color: #f40101;"><i class="fa-regular fa-star" style="color: #f40101;"></i><i class="fa-regular fa-star" style="color: #f40101;"></i></i><i class="fa-regular fa-star" style="color: #f40101;"></i><i class="fa-regular fa-star" style="color: #f40101;"></i></td>
                                <td>Description</td>
                                <td>Event name</td>
                                <td><a href=""class="dbtn sm danger">Delete</a></td>
                            </tr>
                            <tr>
                                <td>Mickey</td>
                                <td>mick456@gmail.com</td>
                                <td><i class="fa-regular fa-star" style="color: #f40101;"></i><i class="fa-regular fa-star" style="color: #f40101;"></i></td>
                                <td>Description</td>
                                <td>Event name</td>
                                <td><a href=""class="dbtn sm danger">Delete</a></td>
                            </tr>
                            <tr>
                                <td>Adamjohn</td>
                                <td>adam456@gmail.com</td>
                                <td><i class="fa-regular fa-star" style="color: #f40101;"></i><i class="fa-regular fa-star" style="color: #f40101;"></i><i class="fa-regular fa-star" style="color: #f40101;"></i><i class="fa-regular fa-star" style="color: #f40101;"></i></td>
                                <td>Description</td>
                                <td>Event name</td>
                                <td><a href=""class="dbtn sm danger">Delete</a></td>
                            </tr>
                        </tbody>
                     </table>
                    </div>
                </main>
            </div>
        </section>
    <script>
        var feedbacks = getAllFeedbacks()
        var table = '<table>'
        feedbacks.then((response) => {
            response.json().then((data)=>{
                console.log("Successfully getAllFeedbacks\n")
                table += '<tr><th>Name</th><th>Event Name</th><th>Location</th><th>Message</th><th>rating</th></tr>';
                data.data.getAllFeedBackInfo.forEach((item) =>{
                    table += `<tr id=item.userName ><td>${item.userName}</td><td>${item.eventName}</td>
                              <td>${item.location}</td><td>${item.feedbackMessage}</td>
                              <td>${toStars(item.rating)}</td></tr>`;
                });
                table += '</table>';
                const tableContainer = document.getElementById('table-container');
                tableContainer.innerHTML = table;
            }).catch((e) =>{
                console.log("Failed to get feedback:" + e);
            })
        }).catch((err) =>{
            console.log("Failed to get feedback:" + err);
        })
    </script>
    </body>
</html>